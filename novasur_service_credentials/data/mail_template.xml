<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data noupdate="1">

        <!-- Email Template: Credencial Asignada -->
        <record id="email_template_credential_assigned" model="mail.template">
            <field name="name">Credenciales de Servicio Digital - Asignación</field>
            <field name="model_id" ref="model_service_credentials"/>
            <field name="subject">Sus credenciales de acceso - {{ object.product_id.name }}</field>
            <field name="email_from">{{ (object.company_id.email or user.email) }}</field>
            <field name="email_to">{{ object.partner_id.email }}</field>
            <field name="body_html" type="html">
<div style="margin: 0px; padding: 0px; font-family: 'Lucida Grande', Ubuntu, Arial, Verdana, sans-serif; font-size: 14px;">
    <table border="0" width="100%" cellpadding="0" bgcolor="#ededed" style="padding: 20px; background-color: #ededed" summary="Header">
        <tr>
            <td align="center">
                <table border="0" width="600" cellpadding="0" bgcolor="#FFFFFF" style="padding: 0px; background-color: #FFFFFF; border: 1px solid #e1e1e1;">
                    <!-- HEADER -->
                    <tr>
                        <td style="padding: 20px; background-color: #875A7B;">
                            <table border="0" cellpadding="0" width="100%">
                                <tr>
                                    <td align="left" style="font-size: 24px; color: #FFFFFF; font-weight: bold;">
                                        <img t-if="object.company_id.logo" t-att-src="image_data_uri(object.company_id.logo)" style="vertical-align: middle; max-height: 48px;" alt="Logo"/>
                                        <span style="vertical-align: middle; margin-left: 10px;">Novasur</span>
                                    </td>
                                </tr>
                            </table>
                        </td>
                    </tr>
                    
                    <!-- CONTENT -->
                    <tr>
                        <td style="padding: 30px 20px;">
                            <h2 style="color: #875A7B; margin-top: 0;">¡Sus credenciales están listas!</h2>
                            
                            <p>Estimado/a <strong>{{ object.partner_id.name }}</strong>,</p>
                            
                            <p>Le enviamos las credenciales de acceso para su servicio digital:</p>
                            
                            <table border="0" cellpadding="10" cellspacing="0" style="margin: 20px 0; width: 100%; background-color: #f9f9f9; border: 1px solid #e1e1e1;">
                                <tr>
                                    <td style="font-weight: bold; width: 40%; border-bottom: 1px solid #e1e1e1;">Servicio:</td>
                                    <td style="border-bottom: 1px solid #e1e1e1;">{{ object.product_id.name }}</td>
                                </tr>
                                <tr>
                                    <td style="font-weight: bold; border-bottom: 1px solid #e1e1e1;">Usuario / Email:</td>
                                    <td style="border-bottom: 1px solid #e1e1e1;"><strong>{{ object.login }}</strong></td>
                                </tr>
                                <tr>
                                    <td style="font-weight: bold; border-bottom: 1px solid #e1e1e1;">Contraseña:</td>
                                    <td style="border-bottom: 1px solid #e1e1e1;"><strong>{{ object.password }}</strong></td>
                                </tr>
                                <tr t-if="object.expire_date">
                                    <td style="font-weight: bold;">Fecha de expiración:</td>
                                    <td>{{ format_datetime(object.expire_date, dt_format='dd/MM/yyyy HH:mm', tz=object.partner_id.tz or 'UTC') }}</td>
                                </tr>
                                <tr t-if="not object.expire_date">
                                    <td style="font-weight: bold;">Vigencia:</td>
                                    <td>Sin fecha de expiración</td>
                                </tr>
                            </table>
                            
                            <p style="background-color: #fff3cd; border: 1px solid #ffc107; padding: 15px; border-radius: 4px;">
                                <strong>⚠️ Importante:</strong><br/>
                                • Guarde estas credenciales en un lugar seguro<br/>
                                • No comparta sus credenciales con terceros<br/>
                                • Si tiene problemas de acceso, contáctenos
                            </p>
                            
                            <p>Orden de compra: <strong>{{ object.sale_order_id.name }}</strong></p>
                            
                            <p>Si tiene alguna pregunta, no dude en contactarnos.</p>
                            
                            <p style="margin-top: 30px;">
                                Saludos cordiales,<br/>
                                <strong>{{ object.company_id.name }}</strong>
                            </p>
                        </td>
                    </tr>
                    
                    <!-- FOOTER -->
                    <tr>
                        <td style="padding: 20px; background-color: #f5f5f5; text-align: center; font-size: 12px; color: #777;">
                            <p style="margin: 0;">
                                {{ object.company_id.name }}<br/>
                                <span t-if="object.company_id.phone">Tel: {{ object.company_id.phone }}</span><br/>
                                <span t-if="object.company_id.email">Email: {{ object.company_id.email }}</span><br/>
                                <span t-if="object.company_id.website">Web: {{ object.company_id.website }}</span>
                            </p>
                        </td>
                    </tr>
                </table>
            </td>
        </tr>
    </table>
</div>
            </field>
            <field name="lang">{{ object.partner_id.lang }}</field>
            <field name="auto_delete">False</field>
        </record>

    </data>
</odoo>
